app_monitoring:
  name: monitoring
  state: absent

  portal:
    - name: Grafana
      subtitle: "Monitoring"
      icon: fas fa-chart-line
      url: "https://grafana.{{ cloudflare_domain }}"
      target: "_blank"
      group: core
      public: false

  namespace: sh-core

  helm_repo:
    - name: prometheus-community
      repo_url: https://prometheus-community.github.io/helm-charts

  charts:
    - ref: prometheus-community/kube-prometheus-stack
      chart_values:
        grafana:
          ingress:
            enabled: true
            annotations:
              traefik.ingress.kubernetes.io/router.entrypoints: websecure
            hosts:
              - grafana.{{ cloudflare_domain }}
            path: /
